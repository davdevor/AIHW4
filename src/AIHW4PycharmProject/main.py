import GA
import ANN
import CsvReader
import random
import math


def getOutput( num):
    x = .05
    for y in range(1,20):
        if num < x:
            return float(y)
        else:
            x = .05 * (y+1)
    return float(20)

if False:
    numAttributes = ['studytime','failures','freetime','absences','G1','G2','G3']
    textAttributes = ['paid','higher','internet','schoolsup']
    weights = [-0.026042082722992303, 0.08783908061003996, -0.19007622838777327, -0.007523795322616462, 0.027229213906521547,
     -0.02129458208125478, 0.054663687281467484, -0.049272623117609465, 0.040787437316729735, 0.061313099989750056,
     -0.04340104042243263, -0.01756664620811527, -0.1028181203417516, -0.06189243335210132, -0.044509060518194685,
     0.08565873398734443, 0.09750424657421276, 0.11993776291930375, 0.06622154365749289, 0.012549681914456734,
     0.023158747612344197, 0.005846831077450574, -0.01387218071640025, -0.05296496260362227, 0.09372033802262757,
     0.08901274134970101, -0.1274786289533927, -0.09589905837119331, 0.012126401115730039, 0.05103586451198741,
     -0.11764358075384264, 0.00793834815054123, 0.030625767821362337, -0.059174715044138036, 0.017939543486016722,
     0.06901002898506427, 0.0877408116313677, 0.008530570108091537, -0.05193642407024723, 0.049662239932690075,
     0.07353801186832275, -0.056043155326966, 0.05923902127706733, -0.08805425571155465, 0.025543105310673858,
     -0.07655622749132289, 0.06292023102722037, -0.028779208663684063, -0.00484931787905054, -0.05085397989005224,
     -0.027217862300250455, 0.02588245273602043, -0.022617766446490516, 0.10416263731276146, 0.11880333390945183]
    #weights = [0.4701502836492245, 0.044561420712619246, 0.12844856111853595, -0.22342277034182453, -0.12649673949962623, -0.38236255279786024, 0.31104734643737636, 0.11179174102842844, 0.17690482039896122, 0.365012282203362, -0.11630397836372933, -0.032971488656108924, -0.4317009766145076, 0.2135046280006803, -0.14206749640895586, 0.5660612143525097, 0.10882312284938613, 0.38219272104430174, -0.5354582304817935, 0.1619501166544922, 0.03117843987596275, -0.25656185127914555, -0.1379596023289291, -0.015430053466958341, 0.20302530718283407, 0.6022015779599821, 0.3188119505905276, 0.04944052556014958, 0.13004320060260116, -0.47450320800048906, 0.2864573960306575, 0.06244569296271277, -0.4073041857978574, -0.30583099348628917, 0.3310645964759315, -0.31170136257302505, 0.052277080411689915, -0.3207052109504318, -0.013927568733407829, 0.17832670737960085, -0.3779445345599534, 0.08220828002785713, -0.1168117647076316, 0.16985038510325848, 0.11728818611276338, 0.36455979873242333, -0.1338508624052636, 0.34717120192479267, 0.18103465917645833, -0.2541455370432432, -0.2876834887451234, 0.42231653379475104, -0.3578770274794049, 0.13128144118739207, 0.2760596044129886]

    data = CsvReader.readCsv('../student-mat.csv',numAttributes,textAttributes)
    tempattributes = numAttributes
    tempattributes.remove("G3")
    for x in textAttributes:
        tempattributes.append(x)
    temp_list = []
    temp_data = []
    ans = []
    for x in data:
        for y in tempattributes:
            temp_list.append(x[y])
        ans.append(x['G3'])
        temp_data.append(temp_list)
        temp_list = []
    data = temp_data
    nn = ANN.ANN()

    count = 0
    for i in range(len(data)):
        output = nn.run(weights, data[i], tempattributes)
        output = getOutput(output)
        if(output==ans[i]):
            count+=1
        print(output)
        print(ans[i])
    print(count/len(data))
else:
    x = GA.GA()
    x.runGA()