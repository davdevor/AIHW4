import GA
import ANN
import CsvReader
import random
import math
def getOutput( num):
    x = .05
    for y in range(1,20):
        if num < x:
            return float(y-1)
        else:
            x = .05 * (y+1)
    return float(20)
if True:
    numAttributes = ['studytime','failures','freetime','absences','G1','G2','G3']
    textAttributes = ['paid','higher','internet','schoolsup']
    weights = [0.23446921481134278, -0.4655658716633574, -0.30418652121661094, -0.299033011525666, -0.43757420182950846,
     -0.31224837121935034, -0.1765878105032997, 0.3303006826025073, -0.3448749617667759, -0.3889669751822878,
     -0.22397420925459965, -0.3627273448602485, 0.4208485966198059, -0.2621674766880082, -0.29164762271334743,
     0.10668674238520354, 0.43915735468464806, 0.0953965470575645, -0.3099157879405758, 0.010480933896447272,
     0.2548356798568769, 0.13327243584470078, 0.23934760038217512, -0.4235359548024154, -0.4967265979180651,
     0.03784081533211344, -0.2261314498730431, -0.0864994800927747, -0.11525364579562077, -0.4091842167581154,
     -0.06385672265442896, -0.18292084690601929, -0.15267539667036328, -0.31406049431531313, -0.4265286965386704,
     -0.31100094312829407, 0.2730406432770343, 0.18886948202176002, 0.47492112326880187, -0.21799860933165788,
     -0.19524707567610186, -0.2371979901198419, 0.41177013729301787, -0.2498761485002487, 0.2723448632990803,
     -0.3533184706455346, 0.2125725227977901, 0.1224991683358917, 0.4208521357139551, -0.18769052555369947,
     -0.22043196386111372, 0.27582974979530206, 0.2679196280512281, -0.13390673608271117, -0.017491941336369183,
     0.15104359235400153, 0.1680339670724205, -0.3190620900357457, -0.13315459421119433, 0.0788472807438811,
     0.49740530789460424, -0.1731235649772073, 0.13051362166812977, -0.17289677722440466, -0.02364359399084336,
     0.07819758165900068, -0.40526692453502716, -0.24611047606088834, -0.16473748791373916, 0.2884004342071036,
     0.29298773931917865, -0.47622649681284035, -0.4298224681053564, -0.15412317478039134, 0.18388883317907045,
     0.3321815183431423, 0.11276333716230028, 0.03138821291172727, -0.1837855381187842, 0.4178433810735182,
     -0.009023617569979067, 0.29318171651205077, -0.24491190673751168, 0.051949382028049454, 0.3769419364564743,
     0.4322198353795859, -0.2926977831793963, 0.008883788542557735, 0.43123163561779804, 0.019571540155746636,
     -0.3839327201624109, 0.3645837406926312, 0.18348125072874327, -0.2918050283512096, -0.13660462173474844,
     0.05074402485810893, -0.25534881404184373, 0.34179735875806716, -0.2975670850860025, 0.22061898684038223,
     0.12277867749243247, -0.40320821069002927, 0.2552439932722439, -0.38223118266616973, 0.14179217442420544,
     0.17050654638189275, -0.03430496389426468, -0.29967795526402285, 0.15572898894446216, -0.39494380823215025,
     -0.2578875461558664, -0.28643276892248437, 0.10608925933840709, -0.4422654872738103, -0.051056961754769606,
     -0.2663287529665698, -0.1335986223214237, -0.41033038735694377, 0.07084680410917346, 0.037227399873781715,
     0.42313320108774644, -0.22291483315062002, -0.07033215625302677, 0.13411878356961032, 0.2888517276514292,
     0.3595916687765238, 0.19491022483590875, 0.07260810880224733, 0.370580472956863, -0.03564978469113655,
     -0.14228782010453164, -0.34204089709973046, -0.2949565086292259, 0.21585056263551045, 0.13935087436558677,
     0.3200996320268184, 0.4273007075168525, 0.17869177442841883, -0.36121009484879324, -0.23724293604335578,
     0.2607797182488992, -0.24940356617502102, 0.2544508171745952, 0.32495808289806155, 0.46510999614097787,
     0.3108575200449425, -0.007052151803675348, 0.36570465767896704, -0.19987987389756817, 0.06737923751583694,
     -0.2524356036826911, 0.41753299053454024, -0.41654897592019696, 0.28082727216292824, -0.3394222202723719,
     0.2104836376529397, 0.35075804012833806, 0.387864601237537, -0.1438072655038841, -0.16987648691498888,
     0.5030235537324161, -0.4249931499851629, -0.07717974033014097, 0.3142138300759946, -0.06697745610700777,
     0.44145857345451917, -0.3789149934062347, -0.36516184647689615, -0.17334678771658954, -0.024490009398330605,
     0.4519876135484097, 0.41543389989415375, -0.48916157636309293, -0.2262036616887696, -0.10808503662128505,
     0.4802975469050972, 0.3906549136759236, 0.28275723154916776, -0.003951354422634652, 0.254517560663179,
     0.13753944022599643, 0.28815455422916486, 0.22312315395505908, 0.278296824335475, -0.10052377822834674,
     0.3481672609102118, -0.0019411079038233713, -0.1610144140901298, 0.4736196139528133, 0.0021908101550988574,
     -0.5044109097841761, -0.17475804705626755, -8.304455905341814e-05, -0.07861291684015122, 0.05102485379088851,
     0.3664925795252989, -0.23422517624929784, 0.2502217955042473, -0.3161938545812087, 0.22114448791395003,
     0.24183892655031436, 0.4770023116600704, -0.4380269130906544, -0.2676970904134413, 0.28107758237999303,
     0.35891657344312305, -0.3045010941687294, 0.30873327802699724, 0.030699465356992972, -0.3684208749227704,
     0.004727806641832423, 0.07480800070928859, -0.3412988418324173, -0.33576559052826194, 0.3667574460114934,
     0.004880881956812091, -0.08115246104172136, 0.23261155513332105, -0.017305515962793953, -0.05534966813505399,
     -0.35823225948205606, 0.29686799727870233, -0.12621304974480804, 0.5032496414042603, -0.10924499283387726,
     -0.11231401504966616, 0.3872576798691122, 0.34282823403581314, -0.19676752783671808, -0.2223152056378813,
     -0.2554474256672647, 0.39872117717168293, -0.39869643097876967, 0.03357910678260519, 0.03161786287618265,
     -0.39881727681242585, -0.4664799900058633, 0.23965647682060726, -0.12257873755225022, 0.30613093493304305,
     0.33946905847473613, -0.031627285136841266, -0.4245378346182627, 0.31907301169371277, 0.05635155275140197,
     -0.13756381190895095, 0.036787669289656766, -0.2781756408601809, 0.49021487490988636, 0.024774135519761487,
     -0.386956128261417, -0.19499624361279952, 0.28669839760589133, 0.22636231426731862, -0.14291407109624504,
     -0.24744861628588208, -0.0297588041026364, -0.344220441313986, 0.14637446962496173, -0.033600464742821,
     -0.04046102247117678, -0.4166427306476958, 0.40264788627064546, 0.21789070510392147, -0.3520212284359548,
     0.4466611027098121, -0.011155595896547606, 0.36900906964229796, 0.25542062628914924, 0.010299191576860925,
     -0.040727575372820554, 0.3611138993021433, 0.45331166645638843, -0.00772468626473005, 0.44370850502788134,
     0.016684673740998766, -0.13216073369778328, 0.00848781759388079, -0.1329833747340431, 0.20115875385974058,
     -0.3841430169893793, -0.08421336382833218, -0.36260198255365056, -0.3439645892983486, -0.31749053372155994,
     0.4196070462714778, -0.406476570537891, -0.1345014603050345, 0.3010734001411526, -0.4802887536038629,
     0.45472177903846345, -0.05907517926741647, 0.06520870764383223, -0.3198177717742206, 0.44484508116562116,
     0.434647029127431, 0.13682753139065806, 0.07639084670795189, 0.4467262031175976, 0.03544104394397709,
     0.48803884803815945, -0.36702598938888337, 0.5123109040612469, -0.4267514612913578, 0.04281729902079201,
     -0.3299920159187779, 0.0040736182267785345, -0.43097587112505986, 0.004221284620342356, 0.39352896704149987]

    data = CsvReader.readCsv('../student-mat.csv',numAttributes,textAttributes)
    tempattributes = numAttributes
    tempattributes.remove("G3")
    for x in textAttributes:
        tempattributes.append(x)
    temp_list = []
    temp_data = []
    ans = []
    for x in data:
        for y in tempattributes:
            temp_list.append(x[y])
        ans.append(x['G3'])
        temp_data.append(temp_list)
        temp_list = []
    data = temp_data
    nn = ANN.ANN()

    count = 0
    for i in range(len(data)):
        output = nn.run(weights, data[i], tempattributes)
        output = getOutput(output)
        if output-ans[i] == 0:
                count+=1
        print(output)
        print(ans[i])
    print(count/len(data))
else:
    x = GA.GA()
    x.runGA()